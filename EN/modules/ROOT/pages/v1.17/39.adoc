:sectnums:
:sectnumlevels: 5

= VectorChord

== Overview
VectorChord is a high-performance, scalable vector search extension for PostgreSQL, considered the successor to pgvecto.rs. It is specifically designed to handle large-scale vector data, capable of efficiently storing and retrieving high-dimensional vectors with limited hardware resources, significantly reducing the storage and computational costs of vector search.

The extension demonstrates exceptional performance, with query speeds up to 5 times faster than pgvector and support for vectors up to 60,000 dimensions. Through innovative RaBitQ compression technology and IVF indexing, VectorChord achieves significant improvements in disk storage efficiency, claiming to store 400,000 vectors for just $1, with cost efficiency far exceeding similar services.

VectorChord is fully compatible with pgvector's data types and query syntax, ensuring seamless migration and integration experience. It has been successfully applied in production environments, reliably managing over 3 billion vectors, making it an ideal foundational component for building next-generation AI applications and conducting massive similarity searches.

== Installation
Based on the development environment, users can choose the appropriate VectorChord installation method from the https://docs.vectorchord.ai/vectorchord/getting-started/installation.html[VectorChord installation] page.

=== Source Installation
In addition to the installation methods provided by the VectorChord community, the IvorySQL community also provides source code installation methods. The source code installation environment is Ubuntu 24.04(x86_64).

Before compilation, ensure that clang and rust are already installed:

clang version requirement >= 16, including libclang;

rust version requirement >= 1.89, including cargo

[TIP]
IvorySQL 1.17 and above is already installed in the environment, with the installation path at /usr/local/ivorysql/ivorysql-1

==== Install Clang

** Install clang 16 compiler and libclang development library
----
sudo apt update
sudo apt install clang-16 libclang-16-dev
----

** Verify Installation
----
$ clang-16 --version
Ubuntu clang version 16.0.6 (23ubuntu4)
Target: x86_64-pc-linux-gnu
Thread model: posix
InstalledDir: /usr/bin
----

** Set Default Clang (Optional): Similar to GCC, you can set the default version:
----
sudo update-alternatives --install /usr/bin/clang clang /usr/bin/clang-16 100
sudo update-alternatives --install /usr/bin/clang++ clang++ /usr/bin/clang++-16 100
----

** Verify Default Version
----
clang --version  # Should display clang-16
clang++ --version
----

** Set LIBCLANG_PATH: Usually automatically set after installing libclang-16-dev, but it's best to confirm or explicitly set it
----
# Find the location of libclang.so (usually /usr/lib/llvm-16/lib/libclang.so.1 or similar)
find /usr -name 'libclang.so*' 2>/dev/null

# Set environment variable
export LIBCLANG_PATH=/usr/lib/llvm-16/lib  # Usually setting the directory containing the file is sufficient

# To make it permanent, you can add the above export command to your shell configuration file (~/.bashrc or ~/.zshrc)
----

==== Install Rust(>=1.89) and Cargo
Following Vectorchord and Rust official recommendations, using rustup for installation is the best practice.
Install rustup:
----
curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
# After running the script, it will prompt you. Press 1 to select default installation
----

Activate environment: After installation, you need to make the new PATH settings take effect
----
source "$HOME/.cargo/env"  # Takes effect for current terminal session
----

Verify installation:
----
rustc --version  # Should output something like rustc 1.xx.x (stable version number >= 1.89)
cargo --version  # Should output cargo version number
----

=== Install VectorChord

----
# Pull vectorchord source code
curl -fsSL https://github.com/tensorchord/VectorChord/archive/refs/tags/0.5.1.tar.gz | tar -xz
cd VectorChord-0.5.1
# Set pg_config path to PATH environment variable, e.g.:
export PATH=/usr/local/ivorysql/ivorysql-1/bin/:$PATH
make build
make install
----

== Configure ivorysql.conf File
----
# Shared preload extensions
shared_preload_libraries = 'vchord'
----

== Restart Service

----
pg_ctl restart -D ./data -l logfile
----

== Create Extension and Confirm VectorChord Version

Connect to the database with psql and execute the following commands:
----
ivorysql=# CREATE EXTENSION IF NOT EXISTS vchord CASCADE;
CREATE EXTENSION

ivorysql=# SELECT * FROM pg_available_extensions WHERE name = 'vchord';
  name   | default_version | installed_version |                          comment
---------+-----------------+-------------------+--------------------------------------------------------------------------------------------
  vchord | 0.5.1           | 0.5.1             | vchord: Vector database plugin for Postgres, written in Rust, specifically designed for LLM
(1 row)
----

== Usage
For VectorChord usage, please refer to https://docs.vectorchord.ai/vectorchord/getting-started/overview.html[VectorChord official documentation]
